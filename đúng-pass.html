<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Love Rain</title>
<link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600&display=swap" rel="stylesheet">
<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html, body {
    width: 100%;
    height: 100%;
    overflow: hidden;

    background-image: url("background1.jpg");
    background-size: cover;        /* ph·ªß full m√†n h√¨nh */
    background-position: center;   /* cƒÉn gi·ªØa */
    background-repeat: no-repeat;  /* kh√¥ng l·∫∑p */
    background-attachment: fixed;
}

/* Canvas full m√†n h√¨nh */
canvas {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
}

/* Th√¥ng ƒëi·ªáp gi·ªØa m√†n h√¨nh */
#message {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: red;
    font-size: 26px;
    text-align: center;
    opacity: 0;
    transition: opacity 0.5s ease;
    z-index: 10;
    padding: 0 15px;
    font-family:'Quicksand', sans-serif;
}

/* ·∫¢nh r∆°i */
.falling-img {
    position: fixed;
    top: -100px;
    width: 70px;
    animation: fall linear forwards;
    pointer-events: none;
    z-index: 9;
}

@keyframes fall {
    to {
        transform: translateY(120vh) rotate(360deg);
        opacity: 0;
    }
}

/* M√†n h√¨nh ch·∫°m b·∫≠t nh·∫°c */
#tap {
    position: fixed;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    color: pink;
    font-size: 18px;
    background: rgba(0,0,0,0.8);
    z-index: 20;
    text-align: center;
}
</style>
</head>

<body>

<audio id="bgm" src="music.mp3" loop></audio>

<div id="tap">üëÜ Ch·∫°m v√†o m√†n h√¨nh ƒë·ªÉ b·∫Øt ƒë·∫ßu üíï</div>

<canvas id="canvas"></canvas>
<div id="message"></div>

<audio id="music" loop>
    <source src="Nhac.mp3" type="audio/mpeg">
</audio>

<script>
/* nh·∫°c */
const bgm=document.getElementById("bgm");
if(localStorage.music){
    bgm.currentTime=localStorage.time||0;
    bgm.play();
}
setInterval(()=>localStorage.time=bgm.currentTime,300);
/* ===== Full canvas ===== */
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

function resize() {
    canvas.width = innerWidth;
    canvas.height = innerHeight;
}
resize();
addEventListener("resize", resize);

/* ===== Tim r∆°i ===== */
const hearts = [];
for (let i = 0; i < 120; i++) {
    hearts.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        size: Math.random() * 20 + 10,
        speed: Math.random() * 2 + 1
    });
}

function drawHearts() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    hearts.forEach(h => {
        ctx.font = h.size + "px Arial";
        ctx.fillStyle = "pink";
        ctx.fillText("‚ù§", h.x, h.y);
        h.y += h.speed;
        if (h.y > canvas.height) {
            h.y = -20;
            h.x = Math.random() * canvas.width;
        }
    });
    requestAnimationFrame(drawHearts);
}
drawHearts();

/* ===== Th√¥ng ƒëi·ªáp ===== */
const messages = [
    "Kh√°nh H√≤a th√¢n m·∫ønü•∞",
    "Ch√∫c Kh√°nh H√≤a m·ªôt ng√†y sinh nh·∫≠t vui v·∫ªüíñ",
    "Ch√∫c Kh√°nh H√≤a sang tu·ªïi m·ªõi chƒÉm ngoan h·ªçc gi·ªèiüíñ",
    "Ch√∫c Kh√°nh H√†o c√†ng ng√†y c√†ng xink, c√†ng dthw h∆°nüíñ",
    "Ch√∫c Kh√°nh H√≤a ƒë·ªó nguy·ªán v·ªçng 1ü•∞"
];

const messageBox = document.getElementById("message");
let index = 0;

function showMessages() {
    if (index < messages.length) {
        messageBox.innerText = messages[index];
        messageBox.style.opacity = 1;

        setTimeout(() => {
            messageBox.style.opacity = 0;
            index++;
        }, 2000);

        setTimeout(showMessages, 2000);
    } else {
        startImageRain();
    }
}

/* ===== ·∫¢nh r∆°i ===== */
const images = ["anh2.jpg", "anh3.jpeg", "anh4.jpg", "anh5.jpg", "anh6.jpeg", "anh7.jpeg", "anh8.jpeg", "anh9.jpeg"];

function createFallingImage() {
    const img = document.createElement("img");
    img.src = images[Math.floor(Math.random() * images.length)];
    img.className = "falling-img";
    img.style.left = Math.random() * (innerWidth - 70) + "px";
    img.style.animationDuration = (Math.random() * 3 + 4) + "s";
    document.body.appendChild(img);
    setTimeout(() => img.remove(), 8000);
}

function startImageRain() {
    setInterval(createFallingImage, 500);
}

/* ===== B·∫≠t nh·∫°c khi ch·∫°m ===== */
const tap = document.getElementById("tap");
const music = document.getElementById("music");

tap.addEventListener("click", () => {
    music.play();
    tap.style.display = "none";
    setTimeout(showMessages, 500);
});
</script>

</body>
</html>